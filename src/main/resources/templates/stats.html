<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–ü–∞–Ω–µ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
        }
        .section-card {
            border-radius: 1rem;
            overflow: hidden;
        }
        .card-header-gradient {
            background: linear-gradient(90deg, #007bff 0%, #00b4d8 100%);
        }
        .card-header-green {
            background: linear-gradient(90deg, #28a745 0%, #95d5b2 100%);
        }
        .card-header-orange {
            background: linear-gradient(90deg, #ffc107 0%, #ffb347 100%);
        }
        .card-header-grey {
            background: linear-gradient(90deg, #6c757d 0%, #adb5bd 100%);
        }
        .card-header-success {
            background: linear-gradient(90deg, #198754 0%, #a0d995 100%);
        }
        .table th, .table td {
            vertical-align: middle;
        }
    </style>
</head>
<body>

<div class="container py-5">
    <h1 class="text-center text-primary mb-5 display-5 fw-bold">üìä –ü–∞–Ω–µ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</h1>

    <!-- –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞ -->
    <div class="card mb-5 shadow-sm section-card">
        <div class="card-body bg-white">
            <form class="row g-3 align-items-end" method="get" th:action="@{/admin/stats}">
                <div class="col-md-5">
                    <label for="from" class="form-label fw-semibold">–°</label>
                    <input type="date" id="from" name="from" th:value="${from}" class="form-control">
                </div>
                <div class="col-md-5">
                    <label for="to" class="form-label fw-semibold">–ü–æ</label>
                    <input type="date" id="to" name="to" th:value="${to}" class="form-control">
                </div>
                <div class="col-md-2 d-grid">
                    <button type="submit" class="btn btn-outline-primary btn-lg">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div class="card mb-5 shadow section-card">
        <div class="card-header text-white card-header-gradient">
            <h5 class="mb-0">üèÖ –¢–æ–ø 10 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h5>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0 table-bordered">
                <thead class="table-light text-center">
                <tr>
                    <th>#</th>
                    <th>–ò–º—è</th>
                    <th>–ö–æ–ª-–≤–æ —É—á–∞—Å—Ç–∏–π</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user, iter : ${topUsers}">
                    <td class="text-center" th:text="${iter.index + 1}">1</td>
                    <td th:text="${user.fullName}">–ò–º—è</td>
                    <td class="text-center" th:text="${user.participationCount}">0</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
    <div class="card mb-5 shadow section-card">
        <div class="card-header text-white card-header-green">
            <h5 class="mb-0">üìà –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h5>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0 table-bordered">
                <thead class="table-light text-center">
                <tr>
                    <th>#</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="event, iter : ${popularEvents}">
                    <td class="text-center" th:text="${iter.index + 1}">1</td>
                    <td th:text="${event.eventName}">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</td>
                    <td th:text="${#temporals.format(event.date, 'dd.MM.yyyy HH:mm')}">01.01.2025</td>
                    <td class="text-center" th:text="${event.participantCount}">0</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ö–æ–ª-–≤–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ø–æ –¥–∞—Ç–∞–º -->
    <div class="card mb-5 shadow section-card">
        <div class="card-header card-header-orange text-white">
            <h5 class="mb-0">üìÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ø–æ –¥–∞—Ç–∞–º</h5>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0 table-bordered">
                <thead class="table-light text-center">
                <tr>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="entry : ${eventCounts}">
                    <td th:text="${entry.key}">01.01.2025</td>
                    <td class="text-center" th:text="${entry.value}">0</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –¢–æ–ø –∫–æ–º–∞–Ω–¥ -->
    <div class="card mb-5 shadow section-card">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">üë• –¢–æ–ø –∫–æ–º–∞–Ω–¥ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h5>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0 table-bordered">
                <thead class="table-light text-center">
                <tr>
                    <th>#</th>
                    <th>–ö–æ–º–∞–Ω–¥–∞</th>
                    <th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th>
                    <th>–£—á–∞—Å—Ç–∏–π –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="team, iter : ${topTeams}">
                    <td class="text-center" th:text="${iter.index + 1}">1</td>
                    <td th:text="${team.teamName}">–ö–æ–º–∞–Ω–¥–∞</td>
                    <td class="text-center" th:text="${team.userCount}">0</td>
                    <td class="text-center" th:text="${team.participationCount}">0</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
    <div class="card mb-5 shadow section-card">
        <div class="card-header card-header-grey text-white">
            <h5 class="mb-0">üìú –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h5>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0 table-bordered">
                <thead class="table-light text-center">
                <tr>
                    <th>#</th>
                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                    <th>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</th>
                    <th>–î–∞—Ç–∞ —É—á–∞—Å—Ç–∏—è</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="log, iter : ${participationLog}">
                    <td class="text-center" th:text="${iter.index + 1}">1</td>
                    <td th:text="${log.userName}">–ò–º—è</td>
                    <td th:text="${log.eventTitle}">–°–æ–±—ã—Ç–∏–µ</td>
                    <td th:text="${#temporals.format(log.eventTime, 'dd.MM.yyyy HH:mm')}">–î–∞—Ç–∞</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –≠–∫–æ-–≥–µ—Ä–æ–π –Ω–µ–¥–µ–ª–∏ -->
    <div class="card mb-5 shadow section-card border-success">
        <div class="card-header card-header-success text-white">
            <h5 class="mb-0">üåø –≠–∫–æ-–≥–µ—Ä–æ–π –Ω–µ–¥–µ–ª–∏</h5>
        </div>
        <div class="card-body">
            <div th:if="${ecoHero != null}">
                <p class="fs-5 mb-2"><strong>üë§ –ù–∏–∫–Ω–µ–π–º:</strong> <span th:text="${ecoHero.nickname}">‚Äî</span></p>
                <p class="fs-5 mb-2"><strong>üåü –û—á–∫–∏:</strong> <span th:text="${ecoHero.points}">0</span></p>
                <p class="fs-5"><strong>üìå –£—á–∞—Å—Ç–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é:</strong> <span th:text="${ecoHero.events}">0</span></p>
            </div>
            <div th:if="${ecoHero == null}">
                <p class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é</p>
            </div>
        </div>
    </div>

</div>
</body>
</html>
